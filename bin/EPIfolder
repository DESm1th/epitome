#!/usr/bin/env python

import os, sys
import epitome as epi

def print_directrories(in_dir):
    """
    Prints the directories found within the input directory.
    """
    
    import os

    dir_list = [d for d in os.listdir(in_dir) if
                           os.path.isdir(os.path.join(in_dir, d)) == True]:
    for d in dir_list:
        print(d)
    if len(d) == 0:
        print('None found.')

def select_experiment():

def select_run_number():

def edit_subject(subject):

    print('')
    print('Current image modalities:')

    print_directories(subject)



def main():

    path, something, something, cores = epi.config()

    # make experiment directory
    print('')
    print('Please input experiment name:')

    experiment_name = raw_input('Experiment: ')

    if os.path.isdir(os.path.join(path, experiment_name)) == True:
        print('Already exists! Adding to existing experiment.')
    else
        os.system('mkdir ' + os.path.join(path, experiment_name))

    # subject generator
    expt = os.path.join(path, experiment_name)
    
    # print a list of the subject, if they exist
    if os.listdir(expt) == []:
        pass
    else
        print('Current participants: ')
        print_directories(expt)

    # move on to a subject loop
    flag = 0
    while flag == 0:
        
        print('')
        print('Input subject name:')

        subject = raw_input('Subject: ')

        # make the subject folder, if it does not exist
        if os.path.isdir(os.path.join(expt, s)) == False:
            os.system('mkdir ' + os.path.join(expt, subject))
        else:
            print('Editng existing subject ' + str(subject))

        # edit subject, and check for the escape flag
        flag = edit_subject(subject)

